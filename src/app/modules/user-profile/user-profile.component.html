<app-header [websiteDataLocal]="websiteDataLocal"></app-header>
<!-- Breadcrumb Starts Here -->
<div class="py-0" style="background-color: #ebebf2;">
    <div class="container">
        <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
            <ol class="breadcrumb align-items-center bg-transparent mb-0">
                <li class="breadcrumb-item"><a href="index.html" class="fs-6 text-secondary">Home</a></li>
                <li class="breadcrumb-item fs-6 text-secondary" aria-current="page">My Profile</li>
            </ol>
        </nav>
    </div>
</div>

<!-- Students Info area Starts Here -->
<section class="section students-info" style="background-color: #ebebf2;">
    <div class="container">
        <div class="students-info-intro">
            <!-- profile Details   -->
            <div class="students-info-intro__profile">
                <div>
                    <div class="students-info-intro-start">
                        <div class="image">
                            <img [src]="userProfilePic" alt="{{ userData && userData.name  ?userData.name :'' }}" />
                        </div>
                        <div class="text">
                            <h5>{{ userData && userData.name ?userData.name :'' }}</h5>
                            <p>{{ userData && userData.type ?userData.type :'' }}</p>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="students-info-intro-end">
                        <div class="enrolled-courses">
                            <div class="enrolled-courses-icon">
                                <svg width="28" height="26" viewBox="0 0 28 26" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M1 1.625H8.8C10.1791 1.625 11.5018 2.15764 12.477 3.10574C13.4521 4.05384 14 5.33974 14 6.68056V24.375C14 23.3694 13.5891 22.405 12.8577 21.6939C12.1263 20.9828 11.1343 20.5833 10.1 20.5833H1V1.625Z"
                                        stroke="#2caff3" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                    <path
                                        d="M27 1.625H19.2C17.8209 1.625 16.4982 2.15764 15.523 3.10574C14.5479 4.05384 14 5.33974 14 6.68056V24.375C14 23.3694 14.4109 22.405 15.1423 21.6939C15.8737 20.9828 16.8657 20.5833 17.9 20.5833H27V1.625Z"
                                        stroke="#2caff3" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </div>
                            <div class="enrolled-courses-text">
                                <h6 class="font-title--xs">{{ myCourses && myCourses.length ? myCourses.length : 0 }}
                                </h6>
                                <p class="fs-6 mt-1">Enrolled Courses</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Nav  -->
            <nav class="students-info-intro__nav">
                <div class="nav" id="nav-tab" role="tablist">
                    <button class="nav-link active" id="nav-coursesall-tab" data-bs-toggle="tab"
                        data-bs-target="#nav-coursesall" type="button" role="tab" aria-controls="nav-coursesall"
                        aria-selected="false">My Courses</button>

                    <button class="nav-link" id="nav-completedcourses-tab" data-bs-toggle="tab"
                        data-bs-target="#nav-completedcourses" type="button" role="tab"
                        aria-controls="nav-completedcourses" aria-selected="false">
                        Completed Courses
                    </button>

                    <button class="nav-link" id="nav-activecourses-tab" data-bs-toggle="tab"
                        data-bs-target="#nav-favorite-tab" type="button" role="tab" aria-controls="nav-favorite-tab"
                        aria-selected="false">
                        Favorites
                    </button>

                    <button class="nav-link" id="nav-quiz-tabs" data-bs-toggle="tab" data-bs-target="#nav-quiz-tab"
                        type="button" role="tab" aria-controls="nav-quiz-tab" aria-selected="false">
                        Quiz History
                    </button>

                    <button class="nav-link" id="nav-purchase-tab" data-bs-toggle="tab" data-bs-target="#nav-purchase"
                        type="button" role="tab" aria-controls="nav-purchase"
                        aria-selected="false">Transactions</button>

                    <button class="nav-link" id="nav-setting-tab" data-bs-toggle="tab" data-bs-target="#nav-setting"
                        type="button" role="tab" aria-controls="nav-setting" aria-selected="false">Settings</button>

                    <button class="nav-link" id="nav-logout-tab" data-bs-toggle="tab" data-bs-target="#nav-logout"
                        type="button" role="tab" aria-controls="nav-logout-tab" aria-selected="false"
                        (click)="logout()"><i class="fa-solid fa-sign-out"></i> Logout</button>
                </div>
            </nav>
        </div>

        <div class="students-info-main">
            <div class="tab-content" id="nav-tabContent">

                <div class="tab-pane fade show active" id="nav-coursesall" role="tabpanel"
                    aria-labelledby="nav-coursesall-tab">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 col-md-6 mb-4" *ngFor="let homeCourse of myCourses">
                            <div class="contentCard contentCard--watch-course">
                                <div class="contentCard-top">
                                    <a [routerLink]="'/course/details/'+homeCourse.course_id"><img
                                            [src]="homeCourse && homeCourse.course && homeCourse.course.banner_image ? imgUrl+homeCourse.course.banner_image : './assets/dist/images/no-image.jpg'"
                                            alt="images" class="img-fluid" /></a>
                                </div>
                                <div class="contentCard-bottom">
                                    <h5>
                                        <a [routerLink]="'/course/details/'+homeCourse.course_id"
                                            class="font-title--card">{{ homeCourse && homeCourse.course &&
                                            homeCourse.course.name ? homeCourse.course.name : '' }}</a>
                                    </h5>
                                    <div class="contentCard-info d-flex align-items-center justify-content-between">

                                        <div class="contentCard-course--status d-flex align-items-center">
                                            <span class="percentage">{{((homeCourse.video_watch_report_count/homeCourse.course.total_video_sum)*100).toFixed(0)}}%</span>
                                            <p>Finish</p>
                                        </div>
                                    </div>
                                    <a class="button button-md button--primary-outline w-100 my-3"
                                        [routerLink]="'/course/watch/'+homeCourse.course_id">Watch Course</a>
                                    <div class="contentCard-watch--progress">
                                        <span class="percentage" style="width: {{((homeCourse.video_watch_report_count/homeCourse.course.total_video_sum)*100).toFixed(0)}}%;"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 mt-lg-5" *ngIf="paginationLinksMyCourse && paginationLinksMyCourse.length"
                            [hidden]="paginationLinksMyCourse">
                            <div class="pagination justify-content-center pb-0">
                                <div class="pagination-group">
                                    <a href="#" class="p_prev">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="9.414" height="16.828"
                                            viewBox="0 0 9.414 16.828">
                                            <path data-name="Icon feather-chevron-left" d="M20.5,23l-7-7,7-7"
                                                transform="translate(-12.5 -7.586)" fill="none" stroke="#1a2224"
                                                stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                            </path>
                                        </svg>
                                    </a>
                                    <a href="#!1" class="cdp_i active">01</a>
                                    <a href="#!+1" class="p_next">
                                        <svg width="10" height="16" viewBox="0 0 10 16" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1.5 1L8.5 8L1.5 15" stroke="#35343E" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"></path>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-favorite-tab" role="tabpanel" aria-labelledby="nav-favorite-tab">
                    <div class="row mt-3" *ngFor="let favVideo of myFavVideos">
                        <div class="col-lg-12">
                            <div class="purchase-area">
                                <div class="d-flex align-items-lg-center align-items-start flex-column flex-lg-row">
                                    <div class="purchase-area-items">
                                        <div
                                            class="purchase-area-items-start mb-0 d-flex align-items-lg-center flex-column flex-lg-row">

                                            <div class="text d-flex flex-column flex-lg-row">
                                                <div class="text-main">
                                                    <h6>
                                                        <a [routerLink]="'/course/details/'+favVideo.course_id">{{
                                                            favVideo && favVideo.video && favVideo.video.name ?
                                                            favVideo.video.name : ''}}</a>
                                                    </h6>
                                                </div>
                                                <p></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="purchase-area-items-end">
                                        <p>Date : {{ favVideo.created_at | date: 'MMM d, y' }}</p>
                                        <dl class="row">
                                            <a class="button button-md button--primary-outline w-50 my-3"
                                                [routerLink]="'/course/watch/'+favVideo.course_id+'/'+favVideo.video_id">Watch
                                                Video</a>
                                        </dl>
                                        
                                    </div>
                                </div>
                                <div class="purchase-area-close">
                                    <a href="javascript:void(0)"  (click)="addtoWishlist(favVideo.course_id,favVideo.video_id)">
                                        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M11 1L1 11" stroke="#F15C4C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                            <path d="M1 1L11 11" stroke="#F15C4C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-completedcourses" role="tabpanel"
                    aria-labelledby="nav-completedcourses-tab">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 col-md-6 mb-4" *ngFor="let homeCourse of completedCourses">
                            <div class="contentCard contentCard--watch-course">
                                <div class="contentCard-top">
                                    <a [routerLink]="'/course/details/'+homeCourse.course_id"><img
                                            [src]="homeCourse && homeCourse.course && homeCourse.course.banner_image ? imgUrl+homeCourse.course.banner_image : './assets/dist/images/no-image.jpg'"
                                            alt="images" class="img-fluid" /></a>
                                </div>
                                <div class="contentCard-bottom">
                                    <h5>
                                        <a [routerLink]="'/course/details/'+homeCourse.course_id"
                                            class="font-title--card">{{ homeCourse && homeCourse.course &&
                                            homeCourse.course.name ? homeCourse.course.name : '' }}</a>
                                    </h5>
                                    
                                    <a class="button button-md button--primary-outline w-100 my-3" [routerLink]="'/play_quiz/'+homeCourse.course.id" style="margin-right: 5%;">Play Quiz</a>
                                    <!--<a class="button button-md button--primary-outline w-45 my-3"
                                        [routerLink]="'/course/watch/'+homeCourse.course_id">Certificate</a>-->
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-quiz-tab" role="tabpanel" aria-labelledby="nav-quiz-tab">
                    <div class="row mt-3" *ngFor="let quiz of myQuizHistory">
                        <div class="col-lg-12">
                            <div class="purchase-area">
                                <div class="d-flex align-items-lg-center align-items-start flex-column flex-lg-row">
                                    <div class="purchase-area-items">
                                        <div
                                            class="purchase-area-items-start mb-0 d-flex align-items-lg-center flex-column flex-lg-row">
                                            <div class="image">
                                                <a href="#">
                                                    <img [src]="quiz && quiz.course && quiz.course.banner_image ? imgUrl+quiz.course.banner_image : './assets/dist/images/no-image.jpg'"
                                                        style="max-height: 115px;" alt="Image" />
                                                </a>
                                            </div>
                                            <div class="text d-flex flex-column flex-lg-row">
                                                <div class="text-main">
                                                    <h6>
                                                        <a [routerLink]="'/course/details/'+quiz.course_id">{{ quiz &&
                                                            quiz.course && quiz.course.name ? quiz.course.name :
                                                            ''}}</a>
                                                    </h6>
                                                    <p>Course Amount : ${{ quiz && quiz.course && quiz.course.price &&
                                                        quiz.course.price ? quiz.course.price : 0}} </p>
                                                </div>
                                                <p></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="purchase-area-items-end">
                                        <p>{{ quiz.created_at | date: 'MMM d, y' }}</p>
                                        <dl class="row">
                                            <dt class="col-sm-8">Percent</dt>
                                            <dd class="col-sm-4">{{quiz.percent}}%</dd>

                                            <dt class="col-sm-8">No of Questions</dt>
                                            <dd class="col-sm-4">{{quiz.total_qns}}</dd>

                                            <dt class="col-sm-8">Right Answers</dt>
                                            <dd class="col-sm-4">{{quiz.total_right_ans}}</dd>

                                            <dt class="col-sm-8">Wrong Answers</dt>
                                            <dd class="col-sm-4">{{quiz.total_wrong_ans}}</dd>
                                        </dl>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="nav-purchase" role="tabpanel" aria-labelledby="nav-purchase-tab">
                    <div class="row mt-3" *ngFor="let transaction of transactions">
                        <div class="col-lg-12">
                            <div class="purchase-area">
                                <div class="d-flex align-items-lg-center align-items-start flex-column flex-lg-row">
                                    <div class="purchase-area-items">
                                        <div
                                            class="purchase-area-items-start mb-0 d-flex align-items-lg-center flex-column flex-lg-row">
                                            <div class="image">
                                                <a href="#">
                                                    <img [src]="transaction && transaction.course && transaction.course.banner_image ? imgUrl+transaction.course.banner_image : './assets/dist/images/no-image.jpg'"
                                                        alt="Image" />
                                                </a>
                                            </div>
                                            <div class="text d-flex flex-column flex-lg-row">
                                                <div class="text-main">
                                                    <h6>
                                                        <a [routerLink]="'/course/details/'+transaction.course_id">{{
                                                            transaction && transaction.course && transaction.course.name
                                                            ? transaction.course.name : ''}}</a>
                                                    </h6>
                                                    <p>Course Amount : ${{ transaction && transaction.course &&
                                                        transaction.course.price && transaction.course.price ?
                                                        transaction.course.price : 0}} </p>
                                                </div>
                                                <p></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="purchase-area-items-end">
                                        <p>{{ transaction.created_at | date: 'MMM d, y' }}</p>
                                        <dl class="row">
                                            <dt class="col-sm-4">Subtotal</dt>
                                            <dd class="col-sm-8">${{ transaction && transaction.price &&
                                                transaction.course.price ? transaction.price : 0}}</dd>

                                            <dt class="col-sm-4">Discount</dt>
                                            <dd class="col-sm-8">
                                                ${{ transaction && transaction.discount && transaction.discount ?
                                                transaction.discount : 0}}
                                            </dd>

                                            <dt class="col-sm-4">Transaction id</dt>
                                            <dd class="col-sm-8">
                                                {{ transaction && transaction.transaction_id &&
                                                transaction.transaction_id ? transaction.transaction_id : ''}}
                                            </dd>
                                        </dl>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="nav-setting" role="tabpanel" aria-labelledby="nav-setting-tab">
                    <div class="row">
                        <div class="col-lg-9 order-2 order-lg-0">
                            <div class="white-bg">
                                <div class="students-info-form">
                                    <h6 class="font-title--card">Your Information</h6>
                                    <form action="#">
                                        <div class="row g-3">
                                            <div class="col-lg-12">
                                                <label for="fname">Full Name</label>
                                                <input type="text" class="form-control" placeholder="Phillip" id="fname"
                                                    [(ngModel)]="userData.name" required input-validator
                                                    aria-required="true" [ngModelOptions]="{standalone: true}" />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <label for="email">Email</label>
                                                <input type="email" id="email" class="form-control"
                                                    placeholder="phillip.bergson@gmail.com" [(ngModel)]="userData.email"
                                                    required input-validator aria-required="true" disabled readonly
                                                    [ngModelOptions]="{standalone: true}" />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <label for="do">What Do You Do</label>
                                                <input type="text" id="do" class="form-control"
                                                    placeholder="UI/UX Designer" [(ngModel)]="userData.type" required
                                                    input-validator aria-required="true" disabled readonly
                                                    [ngModelOptions]="{standalone: true}" />
                                            </div>
                                        </div>
                                        <div class="row g-3">
                                            <div class="col-lg-12">
                                                <label for="pnumber">Phone Number</label>
                                                <input type="text" class="form-control" placeholder="+8801236-858966"
                                                    id="pnumber" [(ngModel)]="userData.contact" required input-validator
                                                    aria-required="true" [ngModelOptions]="{standalone: true}" />
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-lg-end justify-content-center mt-2">
                                            <button class="button button-lg button--primary" type="submit"
                                                (click)="updateProfile()" [disabled]="showLoading">Save
                                                Changes</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="white-bg mt-4">
                                <div class="students-info-form">
                                    <h6 class="font-title--card">Change Password</h6>
                                    <form action="#">
                                        <div class="row">
                                            <div class="col-12">
                                                <label for="oldPassword">Current Password</label>
                                                <div class="input-with-icon">
                                                    <input type="password" id="oldPassword" class="form-control"
                                                        placeholder="Enter Password" [(ngModel)]="oldPassword" required
                                                        input-validator aria-required="true"
                                                        [ngModelOptions]="{standalone: true}" />
                                                    <div class="input-icon" onclick="showPassword('oldPassword',this)">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" class="feather feather-eye">
                                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z">
                                                            </path>
                                                            <circle cx="12" cy="12" r="3"></circle>
                                                        </svg>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <label for="password">New Password</label>
                                                <div class="input-with-icon">
                                                    <input type="password" id="password" class="form-control"
                                                        placeholder="Enter Password" [(ngModel)]="password" required
                                                        input-validator aria-required="true"
                                                        [ngModelOptions]="{standalone: true}" />
                                                    <div class="input-icon" onclick="showPassword('password',this)">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" class="feather feather-eye">
                                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z">
                                                            </path>
                                                            <circle cx="12" cy="12" r="3"></circle>
                                                        </svg>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <label for="confirmPassword">Confirm New Password</label>
                                                <div class="input-with-icon">
                                                    <input type="password" id="confirmPassword" class="form-control"
                                                        placeholder="Enter Password" [(ngModel)]="confirmPassword"
                                                        required input-validator aria-required="true"
                                                        [ngModelOptions]="{standalone: true}" />
                                                    <div class="input-icon"
                                                        onclick="showPassword('confirmPassword',this)">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" class="feather feather-eye">
                                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z">
                                                            </path>
                                                            <circle cx="12" cy="12" r="3"></circle>
                                                        </svg>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-lg-end justify-content-center mt-2">
                                            <button class="button button-lg button--primary" type="submit"
                                                (click)="updatePassword()" [disabled]="showLoading">Save
                                                Changes</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 order-1 order-lg-0 mt-4 mt-lg-0">
                            <div class="white-bg">
                                <div class="change-image-wizard">
                                    <div class="image mx-auto">
                                        <img [src]="userProfilePic"
                                            alt="{{ userData && userData.name  ?userData.name :'' }}" />
                                        <input type="file" accept="image/*" name="image"
                                            (change)="changeProfilePhoto($event)" #file style="visibility: hidden;">
                                    </div>
                                    <form action="#">
                                        <div class="d-flex justify-content-center">
                                            <button type="submit" class="button button--primary-outline"
                                                (click)="file.click()">CHANGE
                                                iMAGE</button>
                                        </div>
                                    </form>
                                    <p>Image size should be under 1MB image ratio 200px.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<app-footer [websiteDataLocal]="websiteDataLocal"></app-footer>