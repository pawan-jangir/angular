<!-- Header Starts Here -->
<header class="bg-transparent">
    <div class="container-fluid">
        <div class="coursedescription-header">
            <div class="coursedescription-header-start">
                <a class="logo-image" href="/">
                    <img src="./assets/dist/images/logo/logo.png" alt="Logo" />
                </a>
                <div class="topic-info">
                    <div class="topic-info-arrow">
                        <a href="javascript:void(0)">
                            <svg width="24" height="25" viewBox="0 0 24 25" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M15.5 19.5L8.5 12.5L15.5 5.5" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </a>
                    </div>
                    <div class="topic-info-text">
                        <h6 class="font-title--xs"><a href="/user-profile">{{ courseData && courseData.name &&
                                courseData.name != '' ? courseData.name : '' }}</a></h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Course Description Starts Here -->
<div class="container-fluid">
    <div class="row course-description">
        <div class="col-lg-8">
            <div class="course-description-start">
                <div class="video-area">
                    <div #player_container class="w-100 mycustomVid" id="myDivID"></div>
                </div>
                <div class="course-description-start-content">
                    <h5 class="font-title--sm">{{ playingVideoData && playingVideoData.name && playingVideoData.name !=
                        '' ? playingVideoData.name : "" }}</h5>
                    <div
                        class="lesson-and-hour-and-comment-outer d-flex flex-wrap align-items-center justify-content-between">
                        <div class="lesson-hours d-flex flex-wrap">
                            <div class="book-lesson">
                                <svg width="18" height="19" viewBox="0 0 18 19" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M1.5 2.75H6C6.79565 2.75 7.55871 3.06607 8.12132 3.62868C8.68393 4.19129 9 4.95435 9 5.75V16.25C9 15.6533 8.76295 15.081 8.34099 14.659C7.91903 14.2371 7.34674 14 6.75 14H1.5V2.75Z"
                                        stroke="#00AF91" stroke-width="1.8" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                    <path
                                        d="M16.5 2.75H12C11.2044 2.75 10.4413 3.06607 9.87868 3.62868C9.31607 4.19129 9 4.95435 9 5.75V16.25C9 15.6533 9.23705 15.081 9.65901 14.659C10.081 14.2371 10.6533 14 11.25 14H16.5V2.75Z"
                                        stroke="#00AF91" stroke-width="1.8" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                </svg>
                                <span>{{courseData && courseData.total_lesson_count ? courseData.total_lesson_count :
                                    0}} Lesson</span>
                            </div>
                            <div class="totoal-hours">
                                <svg width="18" height="19" viewBox="0 0 18 19" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M9 17C13.1421 17 16.5 13.6421 16.5 9.5C16.5 5.35786 13.1421 2 9 2C4.85786 2 1.5 5.35786 1.5 9.5C1.5 13.6421 4.85786 17 9 17Z"
                                        stroke="#FF7A1A" stroke-width="1.8" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                    <path d="M9 5V9.5L12 11" stroke="#FF7A1A" stroke-width="1.8" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                </svg>
                                <span>{{courseData && courseData.total_length_minutes ? courseData.total_length_minutes
                                    : 0}} Hours</span>
                            </div>
                            <div class="download-note">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="#00af91" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="feather feather-file">
                                    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z">
                                    </path>
                                    <polyline points="13 2 13 9 20 9"></polyline>
                                </svg>
                                <a target="_blank"
                                    href="{{ playingVideoData && playingVideoData.video_note && playingVideoData.video_note != '' ? imgUrl+playingVideoData.video_note : 'javascript:void(0)'  }}"
                                    class="text-reset text-decoration-underline"><span>Download note</span></a>
                            </div>
                            <div class="add-to-wishlist {{ videoWatchHistory && videoWatchHistory.favourite && videoWatchHistory.favourite == 1 ? 'active' : '' }}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="red"
                                    class="bi bi-heart notOnActive" viewBox="0 0 16 16" (click)="addtoWishlist()"
                                    style="cursor: pointer;">
                                    <path
                                        d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="red"
                                    class="bi bi-heart-fill showOnActive " viewBox="0 0 16 16">
                                    <path fill-rule="evenodd"
                                        d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z" />
                                </svg>
                                <a href="javascript:void(0)" class="text-reset"
                                    (click)="addtoWishlist()"><span>Wishlist</span></a>
                            </div>
                            <div class="report-this" *ngIf="isFlaged == 0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#FF7A1A"
                                    class="bi bi-flag notOnActive" viewBox="0 0 16 16">
                                    <path
                                        d="M14.778.085A.5.5 0 0 1 15 .5V8a.5.5 0 0 1-.314.464L14.5 8l.186.464-.003.001-.006.003-.023.009a12.435 12.435 0 0 1-.397.15c-.264.095-.631.223-1.047.35-.816.252-1.879.523-2.71.523-.847 0-1.548-.28-2.158-.525l-.028-.01C7.68 8.71 7.14 8.5 6.5 8.5c-.7 0-1.638.23-2.437.477A19.626 19.626 0 0 0 3 9.342V15.5a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 1 0v.282c.226-.079.496-.17.79-.26C4.606.272 5.67 0 6.5 0c.84 0 1.524.277 2.121.519l.043.018C9.286.788 9.828 1 10.5 1c.7 0 1.638-.23 2.437-.477a19.587 19.587 0 0 0 1.349-.476l.019-.007.004-.002h.001M14 1.221c-.22.078-.48.167-.766.255-.81.252-1.872.523-2.734.523-.886 0-1.592-.286-2.203-.534l-.008-.003C7.662 1.21 7.139 1 6.5 1c-.669 0-1.606.229-2.415.478A21.294 21.294 0 0 0 3 1.845v6.433c.22-.078.48-.167.766-.255C4.576 7.77 5.638 7.5 6.5 7.5c.847 0 1.548.28 2.158.525l.028.01C9.32 8.29 9.86 8.5 10.5 8.5c.668 0 1.606-.229 2.415-.478A21.317 21.317 0 0 0 14 7.655V1.222z" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#FF7A1A"
                                    class="bi bi-flag-fill showOnActive" viewBox="0 0 16 16">
                                    <path
                                        d="M14.778.085A.5.5 0 0 1 15 .5V8a.5.5 0 0 1-.314.464L14.5 8l.186.464-.003.001-.006.003-.023.009a12.435 12.435 0 0 1-.397.15c-.264.095-.631.223-1.047.35-.816.252-1.879.523-2.71.523-.847 0-1.548-.28-2.158-.525l-.028-.01C7.68 8.71 7.14 8.5 6.5 8.5c-.7 0-1.638.23-2.437.477A19.626 19.626 0 0 0 3 9.342V15.5a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 1 0v.282c.226-.079.496-.17.79-.26C4.606.272 5.67 0 6.5 0c.84 0 1.524.277 2.121.519l.043.018C9.286.788 9.828 1 10.5 1c.7 0 1.638-.23 2.437-.477a19.587 19.587 0 0 0 1.349-.476l.019-.007.004-.002h.001" />
                                </svg>
                                <a href="javascript:void(0)" class="text-reset" data-bs-toggle="modal"
                                    data-bs-target="#reportModal"><span>Report</span></a>
                            </div>
                        </div>
                        <div class="leave-comment">
                            <button class="button button--dark" data-bs-toggle="modal"
                                data-bs-target="#ratingModal">Leave a Rating</button>
                            <div class="given-rating d-flex justify-content-center d-none">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <nav class="course-description-start-content-tab">
                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                            <button class="nav-link active" id="nav-ldescrip-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-ldescrip" type="button" role="tab" aria-controls="nav-ldescrip"
                                aria-selected="true">
                                Lesson Description
                            </button>
                            <button class="nav-link" id="nav-lcomments-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-lcomments" type="button" role="tab" aria-controls="nav-lcomments"
                                aria-selected="false">Comments</button>
                            <button class="nav-link" id="nav-loverview-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-loverview" type="button" role="tab" aria-controls="nav-loverview"
                                aria-selected="false">Course Overview</button>
                            <button class="nav-link" id="nav-linstruc-tab" data-bs-toggle="tab"
                                data-bs-target="#nav-linstruc" type="button" role="tab" aria-controls="nav-linstruc"
                                aria-selected="false">Instructor</button>
                        </div>
                    </nav>
                    <div class="tab-content course-description-start-content-tabitem" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="nav-ldescrip" role="tabpanel"
                            aria-labelledby="nav-ldescrip-tab">
                            <!-- Lesson Description Starts Here -->
                            <div class="lesson-description">
                                <p>{{ playingVideoData && playingVideoData.description && playingVideoData.description
                                    != '' ? playingVideoData.description : "No details found" }}
                                </p>
                            </div>
                            <!-- Lesson Description Ends Here -->
                        </div>
                        <div class="tab-pane fade" id="nav-lcomments" role="tabpanel"
                            aria-labelledby="nav-lcomments-tab">
                            <!-- Lesson Comments Starts Here -->
                            <div class="lesson-comments">
                                <div class="students-feedback pt-0 ps-0 pe-0 pb-0 mb-0">
                                    <div class="students-feedback-heading">
                                        <h5 class="font-title--card">Comments <span>({{courseData &&
                                                courseData.course_rating_count ? courseData.course_rating_count :
                                                0}})</span></h5>
                                    </div>
                                    <div class="students-feedback-item" *ngFor="let review of reviews; let i = index">
                                        <div class="feedback-rating">
                                            <div class="feedback-rating-start">
                                                <div class="image">
                                                    <img *ngIf="!review.user  || !review.user.image"
                                                        src="./assets/dist/images/ellipse/user.jpg" alt="Image" />
                                                    <img *ngIf="review.user && review.user.image"
                                                        [src]="imgUrl+review.user.image" alt="Image" />
                                                </div>
                                                <div class="text">
                                                    <h6 class="font-para--md">
                                                        <a href="javascript:void(0)">{{review.user && review.user.name ?
                                                            review.user.name : 'N/A'}}</a>
                                                    </h6>
                                                    <p>{{ review.created_at | dateAgo }}</p>
                                                </div>
                                            </div>
                                            <div class="feedback-rating-end">
                                                <ul class="testimonial__item-star d-flex align-items-center">
                                                    <li
                                                        *ngFor="let item of [].constructor( review.rating ); let i = index">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                            viewBox="0 0 24 24" fill="currentColor"
                                                            stroke="currentColor" stroke-width="2"
                                                            stroke-linecap="round" stroke-linejoin="round"
                                                            class="feather feather-star">
                                                            <polygon
                                                                points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                                            </polygon>
                                                        </svg>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <p class="font-para--md">{{review.comment}}
                                        </p>
                                    </div>
                                    <button *ngIf="totalPage > currentPage" (click)="loadMoreReviews()"
                                        class="button button-md button--primary-outline">Load More</button>
                                </div>
                            </div>
                            <!-- Lesson Comments Ends Here -->
                        </div>
                        <div class="tab-pane fade" id="nav-loverview" role="tabpanel"
                            aria-labelledby="nav-loverview-tab">
                            <!-- Course Overview Starts Here -->
                            <div class="row course-overview-main">
                                <div class="course-overview-main-item">
                                    <h6 class="font-title--card">Description</h6>
                                    <p class="mb-3 font-para--lg">
                                        {{courseData && courseData.description && courseData.description != 'null' ?
                                        courseData.description : 'No data added yet.'}}
                                    </p>
                                </div>
                            </div>
                            <!-- Course Overview Ends Here -->
                        </div>
                        <div class="tab-pane fade" id="nav-linstruc" role="tabpanel" aria-labelledby="nav-linstruc-tab">
                            <!-- course details instructor  -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="course-instructor mw-100">
                                        <div class="course-instructor-info" *ngIf="courseData && courseData.tutor">
                                            <div class="instructor-image" >
                                                <img [src]="courseData.tutor && courseData.tutor.image ? imgUrl+'uploads/users/'+courseData.tutor.image : './assets/dist/images/avtar.png'"
                                                    alt="Instructor" />
                                            </div>
                                            <div class="instructor-text">
                                                <h6 class="font-title--xs"><a href="javascript:void(0)">{{courseData &&
                                                        courseData.tutor ? courseData.tutor.name : ''}}</a></h6>
                                                <p>{{courseData && courseData.tutor ? courseData.tutor.type : ''}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz-section" *ngIf="quickQuizs && quickQuizs.length && quizScoreShow == 0">
                        <h5 class="fw-bold">Rate Yourself</h5>
                        <div class="questions-outer">
                            <form>
                                <div class="questions-block"
                                    [ngClass]="{'first': isFirst, 'show': isFirst, 'last': isLast}"
                                    *ngFor="let quiz of quickQuizs ; first as isFirst; last as isLast; let i = index">
                                    <div class="question">
                                        <span class="question_number">{{ i+1 }}</span> {{quiz.question}}
                                    </div>
                                    <div class="choices">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question{{quiz.id}}"
                                                id="answer_{{quiz.id}}_ans1" [(ngModel)]="quiz.answer"
                                                [value]="answerA">
                                            <label class="form-check-label" for="answer_{{quiz.id}}_ans1">
                                                A. {{quiz.ans1}}
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question{{quiz.id}}"
                                                id="answer_{{quiz.id}}_ans2" [(ngModel)]="quiz.answer"
                                                [value]="answerB">
                                            <label class="form-check-label" for="answer_{{quiz.id}}_ans2">
                                                B. {{quiz.ans2}}
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question{{quiz.id}}"
                                                id="answer_{{quiz.id}}_ans3" [(ngModel)]="quiz.answer"
                                                [value]="answerC">
                                            <label class="form-check-label" for="answer_{{quiz.id}}_ans3">
                                                C. {{quiz.ans3}}
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question{{quiz.id}}"
                                                id="answer_{{quiz.id}}_ans4" [(ngModel)]="quiz.answer"
                                                [value]="answerD">
                                            <label class="form-check-label" for="answer_{{quiz.id}}_ans4">
                                                D. {{quiz.ans4}}
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="next-prev-submit d-flex flex-wrap justify-content-between">
                                    <button class="button button--dark prev-btn" disable="disable"
                                        (click)="playQuiz(false)">Previous</button>
                                    <button class="button button--primary next-btn"
                                        (click)="playQuiz(false)">Next</button>
                                    <button class="button button--primary finish-btn" type="submit"
                                        (click)="playQuiz(true)">Finish</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="quiz-section" *ngIf="quizScoreShow && quizScoreShow.percent">
                        <div class="white_bg_box shadow">
                            <div class="page_heading">
                                <h1 class="fw-bold text-center mt-3 mb-2">Thank You for playing quiz</h1>
                                <p class="text-muted text-center" *ngIf="quizScoreShow && quizScoreShow.percent > 40">
                                    You did a Great Job! We are showing your score below.</p>
                                <p class="text-muted text-center" *ngIf="quizScoreShow && quizScoreShow.percent <= 40">
                                    You should need more practice.</p>
                            </div>
                            <div class="scoreboard_outer d-flex flex-wrap justify-content-center align-items-center">
                                <div class="showing_percentage">
                                    <small class="d-block text-md-start text-center">You Scored</small>
                                    <span class="percentage_scored d-block fw-bold text-success">{{quizScoreShow &&
                                        quizScoreShow.percent ? quizScoreShow.percent : 0}}%</span>
                                </div>
                                <div class="correct_n_incorrect_outer">
                                    <div class="correct_questions alert alert-success text-center">
                                        <span>Total corrected questions</span>
                                        <span class="d-block fw-bold">{{quizScoreShow && quizScoreShow.total_right_ans ?
                                            quizScoreShow.total_right_ans : 0}}</span>
                                    </div>
                                    <div class="incorrect_questions alert alert-danger text-center">
                                        <span>Total in-corrected questions</span>
                                        <span class="d-block fw-bold">{{quizScoreShow && quizScoreShow.total_wrong_ans ?
                                            quizScoreShow.total_wrong_ans : 0}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="videolist-area">
                <div class="videolist-area-heading">
                    <h6>Course Contents</h6>
                    <!-- <p>5% Completed</p> -->
                </div>
                <div class="videolist-area-bar">
                    <span class="videolist-area-bar--progress"></span>
                </div>
                <div class="videolist-area-bar__wrapper" *ngIf="courseData && courseData.topics">
                    <div class="videolist-area-wizard" *ngFor="let carriculam of courseData.topics;let i = index">
                        <div class="wizard-heading">
                            <h6 class="">{{carriculam.name}}</h6>
                        </div>
                        <div class="main-wizard" *ngFor="let video of carriculam.topic_videos;let videoIndex = index">
                            <div class="main-wizard__wrapper {{ playingVideoData && playingVideoData.id && playingVideoData.id == video.id ? 'active' : '' }}"
                                (click)="playVideo(video)">
                                <a class="main-wizard-start">
                                    <div class="main-wizard-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="feather feather-play-circle">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <polygon points="10 8 16 12 10 16 10 8"></polygon>
                                        </svg>
                                    </div>
                                    <div class="main-wizard-title">
                                        <p>{{video.name}}</p>
                                    </div>
                                </a>
                                <div class="main-wizard-end d-flex align-items-center">
                                    <!-- <span>12:34</span> -->
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value=""
                                            style="border-radius: 0px; margin-left: 5px;" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Course Description Ends Here -->

<!-- Rating Modal -->
<div class="modal fade modal--rating" id="reportModal" tabindex="-1" aria-labelledby="reportModal" aria-hidden="true"
    data-backdrop="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Report Video</h5>
                <button type="button" class="btn-close flagVideoClose" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>

            <div class="modal-footer border-0">
                <form action="#" class="w-100">
                    <div class="row">
                        <div class="col-lg-12">
                            <label for="messages">Comment</label>
                            <textarea id="messages" placeholder="How is your feeling to taking these course?"
                                class="w-100" input-validator name="messages" [(ngModel)]="messages"></textarea>
                        </div>
                    </div>

                    <br />
                    <button type="button" (click)="reportVideo()" class="button button-md button--primary w-100">Submit
                        <div class="lds-ring" *ngIf="isLoading">
                            <div><img src="../../../assets/src/images/spinner.gif" class="spinnerImg" /></div>
                            <div></div>
                        </div>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade modal--rating" id="ratingModal" tabindex="-1" aria-labelledby="ratingModal" aria-hidden="true"
    data-backdrop="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Leave A Rating</h5>
                <button type="button" class="btn-close closeRatingModel" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pt-0 pb-0">
                <div class="modal-body-rating">
                    <p>5 <span>(Good/Amazing)</span></p>
                    <star-rating [value]="totalStarSelected" [totalstars]='5' checkedcolor="red" uncheckedcolor="black"
                        size="24px" [readonly]="false" (rate)="onRate($event)" checkedcolor="gold"
                        uncheckedcolor="#cccccc" size="50px"></star-rating>
                </div>
            </div>
            <div class="modal-footer border-0">
                <form action="#" class="w-100">
                    <div class="row">
                        <div class="col-lg-12">
                            <label for="messages">Message</label>
                            <textarea id="messages" placeholder="How is your feeling to taking these course?"
                                class="w-100" input-validator name="messages" [(ngModel)]="messages"></textarea>
                        </div>
                    </div>

                    <br />
                    <button type="button" (click)="saveRating()" class="button button-md button--primary w-100">Submit
                        <div class="lds-ring" *ngIf="isLoading">
                            <div><img src="../../../assets/src/images/spinner.gif" class="spinnerImg" /></div>
                            <div></div>
                        </div>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
<app-footer [websiteDataLocal]="websiteDataLocal"></app-footer>